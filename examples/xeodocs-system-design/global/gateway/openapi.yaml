openapi: 3.0.3
info:
  title: XeoDocs API
  description: |
    API for XeoDocs translation orchestration system. Handles project management, language tracking, and CLI synchronization.
    
    This is the Unified Gateway Specification that aggregates all domain-specific specifications.
  version: 1.0.0
  license:
    name: MIT
    url: https://opensource.org/licenses/MIT

servers:
  - url: https://api.xeodocs.com/v1
    description: Production Server

components:
  securitySchemes:
    cookieAuth:
      type: apiKey
      description: JWT authentication stored in HTTPOnly Secure Cookie
      in: cookie
      name: auth_token
    apiKeyAuth:
      type: apiKey
      in: header
      name: X-API-Key

  headers:
    X-RateLimit-Limit:
      $ref: '../../domains/common/openapi.yaml#/components/headers/X-RateLimit-Limit'
    X-RateLimit-Remaining:
      $ref: '../../domains/common/openapi.yaml#/components/headers/X-RateLimit-Remaining'
    X-RateLimit-Reset:
      $ref: '../../domains/common/openapi.yaml#/components/headers/X-RateLimit-Reset'

  schemas:
    # Common
    Error:
      $ref: '../../domains/common/openapi.yaml#/components/schemas/Error'
    ErrorDetail:
      $ref: '../../domains/common/openapi.yaml#/components/schemas/ErrorDetail'
    Pagination:
      $ref: '../../domains/common/openapi.yaml#/components/schemas/Pagination'
    
    # Identity
    User:
      $ref: '../../domains/identity/openapi.yaml#/components/schemas/User'
    UserDetail:
      $ref: '../../domains/identity/openapi.yaml#/components/schemas/UserDetail'
    UserPreference:
      $ref: '../../domains/identity/openapi.yaml#/components/schemas/UserPreference'
    LoginRequest:
      $ref: '../../domains/identity/openapi.yaml#/components/schemas/LoginRequest'
    LoginResponse:
      $ref: '../../domains/identity/openapi.yaml#/components/schemas/LoginResponse'
    
    # Projects
    Project:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/Project'
    Language:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/Language'
    File:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/File'
    FileStatus:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/FileStatus'
    IgnoredPath:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/IgnoredPath'
    SpecialPath:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/SpecialPath'
    NextFileResponse:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/NextFileResponse'
    SubmitRequest:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/SubmitRequest'
    SubmitResponse:
      $ref: '../../domains/projects/openapi.yaml#/components/schemas/SubmitResponse'
    
    # Configuration
    Configuration:
      $ref: '../../domains/configuration/openapi.yaml#/components/schemas/Configuration'

tags:
  - name: Auth
    description: Authentication endpoints
  - name: Users
    description: User management
  - name: UserPreferences
    description: User preferences
  - name: Projects
    description: Project management
  - name: Languages
    description: Language management
  - name: Files
    description: File management per language
  - name: Configurations
    description: System-wide configurations
  - name: IgnoredPaths
    description: Project ignored paths
  - name: SpecialPaths
    description: Project special paths
  - name: Workflow
    description: CLI and Translation workflow endpoints

paths:
  # System
  /health:
    $ref: '../../domains/common/openapi.yaml#/paths/~1health'

  # Identity Domain
  /auth/login:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1auth~1login'
  /auth/logout:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1auth~1logout'
  /users:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1users'
  /users/me:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1users~1me'
  /users/{userId}:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1users~1{userId}'
  /users/{userId}/preferences:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1users~1{userId}~1preferences'
  /users/{userId}/preferences/{key}:
    $ref: '../../domains/identity/openapi.yaml#/paths/~1users~1{userId}~1preferences~1{key}'

  # Configuration Domain
  /configurations:
    $ref: '../../domains/configuration/openapi.yaml#/paths/~1configurations'
  /configurations/{key}:
    $ref: '../../domains/configuration/openapi.yaml#/paths/~1configurations~1{key}'

  # Projects Domain
  /projects:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects'
  /projects/{projectId}:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}'
  /projects/{projectId}/languages:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages'
  /projects/{projectId}/languages/{languageId}:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}'
  /projects/{projectId}/ignored-paths:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1ignored-paths'
  /projects/{projectId}/ignored-paths/{ignoredPathId}:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1ignored-paths~1{ignoredPathId}'
  /projects/{projectId}/special-paths:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1special-paths'
  /projects/{projectId}/special-paths/{specialPathId}:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1special-paths~1{specialPathId}'
  /projects/{projectId}/languages/{languageId}/files:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}~1files'
  /projects/{projectId}/languages/{languageId}/files/{fileId}:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}~1files~1{fileId}'
  /projects/{projectId}/languages/{languageId}/next-file:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}~1next-file'
  /projects/{projectId}/languages/{languageId}/submissions:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}~1submissions'
  /projects/{projectId}/languages/{languageId}/status:
    $ref: '../../domains/projects/openapi.yaml#/paths/~1projects~1{projectId}~1languages~1{languageId}~1status'
